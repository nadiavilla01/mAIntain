:root{
    --bg:#0b1220;
    --panel:#0f172a;
    --panel-2:#0e162c;
    --border:#223049;
    --muted:#94a3b8;
    --text:#e6eefb;
  
    --accent:#38bdf8;       
    --accent-2:#22d3ee;     
    --good:#10b981;         
    --warn:#facc15;         
    --bad:#ef4444;          
  
    --radius:16px;
    --shadow:0 12px 32px rgba(0,0,0,.28);
  
    
    --elev-bg:linear-gradient(180deg, rgba(16,26,48,.70), rgba(10,20,38,.56));
    --elev-border:1px solid rgba(255,255,255,.03);
  }
  
  *{ box-sizing:border-box }
  .fd-hidden{ display:none }
  
  .fd-page{
    min-height:100vh;
    background:#030303;
    color:var(--text);
    font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial;
  }
  
  
  .fd-confetti{ position:fixed; inset:0; pointer-events:none; z-index:9999; }
  
  .fd-container{ margin:0 auto; padding:32px 20px 56px; }
  
  
  .fd-title{ font-size:32px; font-weight:800; letter-spacing:.2px; margin:0 0 8px; }
  .fd-subtitle{ color:var(--muted); margin:0 0 18px; }
  
  
  .fd-steps{
    display:grid; grid-template-columns:repeat(3,1fr);
    gap:12px; margin-bottom:24px;
  }
  .fd-step{
    border:1px solid var(--border);
    background:var(--elev-bg);
    border-radius:12px; padding:12px 14px; text-align:center;
    box-shadow:var(--shadow), inset 0 0 0 1px rgba(255,255,255,.02);
  }
  .fd-step.is-active{
    border-color:rgba(56,189,248,.45);
    box-shadow:var(--shadow), 0 0 0 1px rgba(56,189,248,.18) inset;
  }
  .fd-step-title{ font-weight:800; font-size:14px; }
  .fd-step-desc{ font-size:12px; color:var(--muted); margin-top:2px; }
  
  
  .fd-grid2{ display:grid; grid-template-columns:1fr; gap:24px; }
  @media(min-width:1024px){ .fd-grid2{ grid-template-columns:1fr 1fr; } }
  
  
  .fd-card{
    background:var(--elev-bg);
    border:var(--elev-border);
    border-radius:var(--radius);
    box-shadow:var(--shadow), inset 0 0 0 1px rgba(255,255,255,.02);
    padding:20px; min-height:340px;
  }
  .fd-resultcard{ padding:22px; }
  
  
  .fd-dropzone{
    border:2px dashed var(--border);
    border-radius:var(--radius);
    padding:28px 20px; text-align:center; transition:.2s ease;
    background:rgba(9,16,30,.6);
  }
  .fd-dropzone:hover{ border-color:#2c4267; background:rgba(12,22,41,.66); }
  .fd-dropzone.is-active{
    border-color:var(--accent);
    background:rgba(10,24,44,.72);
    box-shadow:0 0 0 3px rgba(56,189,248,.12) inset;
  }
  
  
  .fd-uploadIcon{
    width:96px; height:96px; border-radius:999px; margin:0 auto;
    display:flex; align-items:center; justify-content:center;
    background:
      radial-gradient(circle at 35% 30%, rgba(56,189,248,.35), transparent 55%),
      radial-gradient(circle at 70% 75%, rgba(34,211,238,.32), transparent 60%),
      linear-gradient(135deg, var(--accent-2), var(--accent));
    box-shadow:
      0 12px 30px rgba(56,189,248,.22),
      inset 0 0 12px rgba(255,255,255,.12);
    color:#06131d;
    animation: fd-float 3s ease-in-out infinite;
  }
  @keyframes fd-float { 0%{transform:translateY(0)} 50%{transform:translateY(-4px)} 100%{transform:translateY(0)} }
  
  .fd-droptext{ margin-top:12px; font-weight:800; line-height:1.3; }
  .fd-browse{
    background:none; border:none; color:#7dd3fc; cursor:pointer;
    text-decoration:underline; text-underline-offset:3px; margin-left:4px;
  }
  .fd-browse:hover{ color:#bfe4ff; }
  .fd-hint{ margin-top:6px; font-size:12px; color:var(--muted); }
  
  
  .fd-queue{ margin-top:14px; display:flex; flex-direction:column; gap:8px; }
  .fd-queue-item{
    display:grid; grid-template-columns:1fr 160px 90px; gap:10px;
    align-items:center; font-size:13px;
  }
  .fd-queue-name{ overflow:hidden; text-overflow:ellipsis; white-space:nowrap; }
  .fd-queue-bar{ height:8px; background:#2a3a57; border-radius:6px; overflow:hidden; }
  .fd-queue-bar>div{ height:100%; background:linear-gradient(90deg, var(--accent-2), var(--accent)); width:0% }
  .fd-queue-status{ display:flex; align-items:center; gap:6px; color:#c9d7ea; }
  .fd-queue-item.is-done .fd-queue-status{ color:var(--good); }
  .fd-queue-item.is-error .fd-queue-status{ color:var(--bad); }
  
  
  .fd-progress{ margin-top:10px; height:8px; border-radius:6px; background:#334155; overflow:hidden; }
  .fd-progress-fill{
    height:100%;
    background: linear-gradient(90deg, rgba(34,211,238,.25) 0%, var(--accent-2) 25%, var(--accent) 65%, rgba(56,189,248,.25) 100%);
    background-size: 220px 100%;
    animation: fd-shimmer .9s linear infinite;
  }
  @keyframes fd-shimmer { 0%{background-position:-220px 0} 100%{background-position:calc(220px + 100%) 0} }
  .fd-progress-meta{ display:flex; justify-content:space-between; color:#a8b1bf; font-size:12px; margin-top:4px; }
  
  
  .fd-buttons{ display:flex; flex-wrap:wrap; gap:10px; margin-top:16px; }
  .fd-btn{
    border:none; cursor:pointer; border-radius:10px; padding:12px 14px;
    font-weight:800; display:inline-flex; align-items:center; gap:8px;
    transition:transform .12s ease, filter .12s ease; user-select:none;
  }
  .fd-btn:disabled{ opacity:.45; cursor:not-allowed; }
  .fd-btn:hover:not(:disabled){ transform:translateY(-1px); filter:brightness(1.05); }
  
  .fd-btn-primary{
    background:linear-gradient(90deg, var(--accent-2), var(--accent));
    color:#03121e; text-shadow:0 1px 0 rgba(255,255,255,.25);
  }
  .fd-btn-ghost{
    background:rgba(15,23,42,.55);
    border:1px solid var(--border);
    color:#d1d8e5;
  }
  .fd-btn-export{
    background:linear-gradient(90deg, var(--good), #34d399);
    color:#05250f; text-shadow:0 1px 0 rgba(255,255,255,.18);
  }
  .fd-btn-mini{
    padding:8px 10px; border-radius:8px;
    background:rgba(15,23,42,.55);
    border:1px solid var(--border);
    color:#d1d8e5; font-weight:700; font-size:12px;
  }
  
  
  .fd-preview{ margin-top:16px; }
  .fd-sectionTitle{ font-weight:800; margin-bottom:8px; display:flex; align-items:center; gap:8px; }
  .fd-preview-img{
    max-height:260px; width:auto; display:block; margin:0 auto;
    border-radius:14px; border:1px solid var(--border); box-shadow:var(--shadow);
  }
  
  
  .fd-result-header{ display:flex; align-items:center; gap:10px; }
  .fd-muted{ color:var(--muted); font-size:12px; }
  
  .fd-placeholder{
    color:#a4aec0; font-size:14px; line-height:1.45;
    background:rgba(8,15,30,.5);
    border:1px dashed var(--border);
    border-radius:12px; padding:14px; margin-top:8px;
  }
  
  .fd-stats{ display:grid; grid-template-columns:1fr; gap:12px; margin-top:14px; }
  @media(min-width:560px){ .fd-stats{ grid-template-columns:1fr 1fr; } }
  
  .fd-stat{
    border:1px solid var(--border);
    background:rgba(10,16,32,.6);
    border-radius:12px; padding:12px;
  }
  .fd-stat-label{ font-size:12px; color:var(--muted); }
  
  .fd-pill{
    margin-top:6px;
    display:inline-flex; align-items:center;
    padding:6px 10px; border-radius:999px;
    border:1px solid rgba(56,189,248,.35);
    background:rgba(56,189,248,.12);
    color:#e9f7ff; font-weight:800; font-size:14px;
  }
  .fd-pill-sm{
    display:inline-flex; align-items:center;
    padding:3px 8px; border-radius:999px;
    border:1px solid rgba(56,189,248,.35);
    background:rgba(56,189,248,.12);
    color:#e9f7ff; font-weight:700; font-size:12px;
  }
  
  .fd-confbar{
    margin-top:8px; height:10px; border-radius:8px; overflow:hidden; background:#334155;
  }
  .fd-confbar-fill{ height:100%; background:linear-gradient(90deg, var(--accent), var(--accent-2)); width:0%; transition:width .25s ease; }
  .fd-confval{ margin-top:6px; font-size:13px; }
  
  
  .fd-toolbar{ margin-top:14px; display:flex; flex-wrap:wrap; align-items:center; gap:10px; }
  .fd-seg{
    display:inline-flex; background:rgba(12,22,41,.6); border:1px solid var(--border); border-radius:10px; overflow:hidden;
  }
  .fd-seg-btn{
    padding:8px 12px; font-weight:800; color:#cfe5ff; background:transparent; border:none; cursor:pointer;
  }
  .fd-seg-btn.is-active{
    background:rgba(34,211,238,.15);
    color:#fff; box-shadow: inset 0 0 0 1px rgba(56,189,248,.35);
  }
  .fd-blend{ display:flex; align-items:center; gap:8px; margin-left:auto; }
  .fd-blend label{ font-size:12px; color:var(--muted); }
  .fd-blend input[type="range"]{ width:160px; accent-color: var(--accent); }
  
  
  .fd-view{ margin-top:10px; }
  .fd-gradcam-img{
    max-height:420px; width:auto; display:block; margin-left:auto; margin-right:auto;
    border-radius:14px; border:1px solid var(--border); box-shadow:var(--shadow);
  }
  
  .fd-stack{ position:relative; display:inline-block; }
  .fd-stack-img{
    max-height:420px; width:auto; display:block;
    border-radius:14px; border:1px solid var(--border);
  }
  .fd-stack-img + .fd-stack-img{ position:absolute; inset:0; object-fit:contain; }
  
  .fd-side{ display:flex; gap:12px; justify-content:center; align-items:flex-start; flex-wrap:wrap; }
  .fd-side-img{ max-height:420px; width:auto; display:block; border-radius:14px; border:1px solid var(--border); }
  
  .fd-legend{
    margin-top:12px; display:flex; align-items:center; justify-content:center;
    gap:10px; color:#aeb7c7; font-size:12px;
  }
  .fd-legend-bar{
    width:150px; height:12px; border-radius:6px;
    background:linear-gradient(90deg,#2563eb,#fde047,#ef4444);
    border:1px solid rgba(255,255,255,.12);
  }
  
  
  .fd-history{ margin-top:28px; }
  .fd-history-head{ display:flex; align-items:center; gap:10px; }
  .fd-history-grid{
    display:grid; grid-template-columns:repeat(1,minmax(0,1fr)); gap:12px; margin-top:10px;
  }
  @media(min-width:640px){ .fd-history-grid{ grid-template-columns:repeat(2,1fr); } }
  @media(min-width:960px){ .fd-history-grid{ grid-template-columns:repeat(3,1fr); } }
  .fd-history-card{
    border:1px solid var(--border); border-radius:12px; background:rgba(10,16,32,.58);
    overflow:hidden; display:grid; grid-template-columns:110px 1fr; gap:10px;
  }
  .fd-history-thumb{ background:#0b1526; display:flex; align-items:center; justify-content:center; }
  .fd-history-thumb img{ width:100%; height:100%; object-fit:cover; display:block; }
  .fd-history-meta{ padding:10px 10px; }
  .fd-history-name{ font-weight:700; font-size:14px; overflow:hidden; text-overflow:ellipsis; white-space:nowrap; }
  .fd-history-sub{ margin-top:6px; display:flex; align-items:center; gap:8px; font-size:12px; }
  .fd-dot{ width:4px; height:4px; border-radius:50%; background:#5e7599; display:inline-block; }
  
  
  .fd-modal{ position:fixed; inset:0; background:rgba(0,0,0,.8); display:flex; align-items:center; justify-content:center; padding:20px; z-index:9998; }
  .fd-modal-img{ max-width:88vw; max-height:90vh; border-radius:14px; box-shadow:0 20px 60px rgba(0,0,0,.6); }
  
  
  .fd-toast{
    position:fixed; right:18px; bottom:18px; z-index:9999;
    background:linear-gradient(90deg, rgba(34,211,238,.20), rgba(56,189,248,.25));
    border:1px solid rgba(56,189,248,.45);
    color:#e9f7ff; font-weight:800; padding:10px 14px; border-radius:10px;
    box-shadow:var(--shadow); animation: fd-toast-in .2s ease-out;
  }
  @keyframes fd-toast-in { from{ transform:translateY(8px); opacity:0 } to{ transform:translateY(0); opacity:1 } }
  
  
  .fd-error{
    margin-bottom:14px;
    background:rgba(239,68,68,.12);
    color:#fecaca;
    border:1px solid rgba(239,68,68,.35);
    border-radius:12px;
    padding:10px 14px;
  }